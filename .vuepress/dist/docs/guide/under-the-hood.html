<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Under the Hood</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/styles.c4eaa9d5.css" as="style"><link rel="preload" href="/assets/js/app.c4eaa9d5.js" as="script"><link rel="preload" href="/assets/js/75.b79f9d0b.js" as="script"><link rel="prefetch" href="/assets/js/1.c23cf118.js"><link rel="prefetch" href="/assets/js/10.d9d86909.js"><link rel="prefetch" href="/assets/js/100.4e92c6de.js"><link rel="prefetch" href="/assets/js/101.9e813f01.js"><link rel="prefetch" href="/assets/js/102.a0a19940.js"><link rel="prefetch" href="/assets/js/103.e7d79031.js"><link rel="prefetch" href="/assets/js/104.6cf23cd1.js"><link rel="prefetch" href="/assets/js/105.64f21ee1.js"><link rel="prefetch" href="/assets/js/106.5416d396.js"><link rel="prefetch" href="/assets/js/107.75ca5b30.js"><link rel="prefetch" href="/assets/js/108.0f7c0d75.js"><link rel="prefetch" href="/assets/js/109.0d28005e.js"><link rel="prefetch" href="/assets/js/11.49f9a5b5.js"><link rel="prefetch" href="/assets/js/110.ee2bb7d4.js"><link rel="prefetch" href="/assets/js/111.b69d2f61.js"><link rel="prefetch" href="/assets/js/112.98844da7.js"><link rel="prefetch" href="/assets/js/113.38aecea4.js"><link rel="prefetch" href="/assets/js/114.8ed19d97.js"><link rel="prefetch" href="/assets/js/115.364a9a96.js"><link rel="prefetch" href="/assets/js/116.7c9d56a0.js"><link rel="prefetch" href="/assets/js/12.6281a864.js"><link rel="prefetch" href="/assets/js/13.cb71a70f.js"><link rel="prefetch" href="/assets/js/14.4b20d9c2.js"><link rel="prefetch" href="/assets/js/15.40f270c4.js"><link rel="prefetch" href="/assets/js/16.59c7837b.js"><link rel="prefetch" href="/assets/js/17.57c35fcf.js"><link rel="prefetch" href="/assets/js/18.af467291.js"><link rel="prefetch" href="/assets/js/19.073be326.js"><link rel="prefetch" href="/assets/js/2.9b5dc0ab.js"><link rel="prefetch" href="/assets/js/20.70a58316.js"><link rel="prefetch" href="/assets/js/21.ccdc7936.js"><link rel="prefetch" href="/assets/js/22.a56d2ac0.js"><link rel="prefetch" href="/assets/js/23.26343d1d.js"><link rel="prefetch" href="/assets/js/24.42490d01.js"><link rel="prefetch" href="/assets/js/25.f7a3a66a.js"><link rel="prefetch" href="/assets/js/26.addb3824.js"><link rel="prefetch" href="/assets/js/27.3a49c516.js"><link rel="prefetch" href="/assets/js/28.781361fb.js"><link rel="prefetch" href="/assets/js/29.a6b64aa4.js"><link rel="prefetch" href="/assets/js/3.05663b14.js"><link rel="prefetch" href="/assets/js/30.75629b7a.js"><link rel="prefetch" href="/assets/js/31.89ca7b60.js"><link rel="prefetch" href="/assets/js/32.4f3e8a54.js"><link rel="prefetch" href="/assets/js/33.6b95a394.js"><link rel="prefetch" href="/assets/js/34.4e37187b.js"><link rel="prefetch" href="/assets/js/35.2a24dca5.js"><link rel="prefetch" href="/assets/js/36.98f8e54b.js"><link rel="prefetch" href="/assets/js/37.29110449.js"><link rel="prefetch" href="/assets/js/38.b214ef33.js"><link rel="prefetch" href="/assets/js/39.8255f52a.js"><link rel="prefetch" href="/assets/js/4.25c6a26c.js"><link rel="prefetch" href="/assets/js/40.ac82a1c2.js"><link rel="prefetch" href="/assets/js/41.c1f76a20.js"><link rel="prefetch" href="/assets/js/42.5b571c8f.js"><link rel="prefetch" href="/assets/js/43.5cbfd567.js"><link rel="prefetch" href="/assets/js/44.af55f338.js"><link rel="prefetch" href="/assets/js/45.f9b45625.js"><link rel="prefetch" href="/assets/js/46.dc622529.js"><link rel="prefetch" href="/assets/js/47.68251ab6.js"><link rel="prefetch" href="/assets/js/48.76c732e7.js"><link rel="prefetch" href="/assets/js/49.fd862f89.js"><link rel="prefetch" href="/assets/js/5.2a0f1976.js"><link rel="prefetch" href="/assets/js/50.c0694317.js"><link rel="prefetch" href="/assets/js/51.c6fac42a.js"><link rel="prefetch" href="/assets/js/52.201db017.js"><link rel="prefetch" href="/assets/js/53.6a946220.js"><link rel="prefetch" href="/assets/js/54.385a295a.js"><link rel="prefetch" href="/assets/js/55.b16ff75b.js"><link rel="prefetch" href="/assets/js/56.8540379c.js"><link rel="prefetch" href="/assets/js/57.80601cc3.js"><link rel="prefetch" href="/assets/js/58.d220371e.js"><link rel="prefetch" href="/assets/js/59.7cf816ef.js"><link rel="prefetch" href="/assets/js/6.969febdd.js"><link rel="prefetch" href="/assets/js/60.1011da7b.js"><link rel="prefetch" href="/assets/js/61.52916e9f.js"><link rel="prefetch" href="/assets/js/62.dd2f6100.js"><link rel="prefetch" href="/assets/js/63.2964e627.js"><link rel="prefetch" href="/assets/js/64.21f93ec5.js"><link rel="prefetch" href="/assets/js/65.42c0f965.js"><link rel="prefetch" href="/assets/js/66.0acc1405.js"><link rel="prefetch" href="/assets/js/67.7d976039.js"><link rel="prefetch" href="/assets/js/68.f69518e6.js"><link rel="prefetch" href="/assets/js/69.c2b246fa.js"><link rel="prefetch" href="/assets/js/7.f8e1fa68.js"><link rel="prefetch" href="/assets/js/70.c4141d93.js"><link rel="prefetch" href="/assets/js/71.5b9f7d81.js"><link rel="prefetch" href="/assets/js/72.7f5c389a.js"><link rel="prefetch" href="/assets/js/73.af1d56c2.js"><link rel="prefetch" href="/assets/js/74.0401e96e.js"><link rel="prefetch" href="/assets/js/76.86caf9da.js"><link rel="prefetch" href="/assets/js/77.9c372c2a.js"><link rel="prefetch" href="/assets/js/78.c472efd8.js"><link rel="prefetch" href="/assets/js/79.9d515989.js"><link rel="prefetch" href="/assets/js/8.32ccab3b.js"><link rel="prefetch" href="/assets/js/80.4de05aac.js"><link rel="prefetch" href="/assets/js/81.df9ac219.js"><link rel="prefetch" href="/assets/js/82.c7c2511f.js"><link rel="prefetch" href="/assets/js/83.79ca556c.js"><link rel="prefetch" href="/assets/js/84.1085b575.js"><link rel="prefetch" href="/assets/js/85.81a4c9ae.js"><link rel="prefetch" href="/assets/js/86.412bc6f2.js"><link rel="prefetch" href="/assets/js/87.f6d7c146.js"><link rel="prefetch" href="/assets/js/88.8f08868d.js"><link rel="prefetch" href="/assets/js/89.ef08e982.js"><link rel="prefetch" href="/assets/js/9.0f5e6122.js"><link rel="prefetch" href="/assets/js/90.8391c019.js"><link rel="prefetch" href="/assets/js/91.545146c8.js"><link rel="prefetch" href="/assets/js/92.e2942441.js"><link rel="prefetch" href="/assets/js/93.cf3fb77c.js"><link rel="prefetch" href="/assets/js/94.16f9940c.js"><link rel="prefetch" href="/assets/js/95.ef3c40ed.js"><link rel="prefetch" href="/assets/js/96.8dcbffa3.js"><link rel="prefetch" href="/assets/js/97.84330bfc.js"><link rel="prefetch" href="/assets/js/98.4b54b432.js"><link rel="prefetch" href="/assets/js/99.3da34af1.js">
    <link rel="stylesheet" href="/assets/css/styles.c4eaa9d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><!----></div><div class="page"><div class="content"><h1 id="under-the-hood"><a href="#under-the-hood" aria-hidden="true" class="header-anchor">#</a> Under the Hood</h1><h2 id="authentication"><a href="#authentication" aria-hidden="true" class="header-anchor">#</a> Authentication</h2><p>The standard Laravel authentication is used, via email &amp; password</p><h2 id="stateful-vs-stateless"><a href="#stateful-vs-stateless" aria-hidden="true" class="header-anchor">#</a> Stateful vs Stateless</h2><p>Since we wanted to log data about our users and their requests, as well as check various permissions, the concept of a
'truly' stateless and secure API backend becomes impossible.</p><p>From a security standpoint we did not feel that a RESTful would not be more secure but probably even less safe.</p><p>Finally, from our own internal tests we concluded that we had no performance issues related to having the
application stateful, especially since we don't aim to build applications of Twitter's scale.</p><p>In conclusion, even though at a point during the development we had the back-end set up as an API using JWT,
in the end we designed it stateful since session is stored in the DB or in files, depending on your chosen setup.</p><h2 id="session-management"><a href="#session-management" aria-hidden="true" class="header-anchor">#</a> Session management</h2><p>Since Enso is built on top of a Laravel back-end, we are using the provided session management</p><h2 id="security"><a href="#security" aria-hidden="true" class="header-anchor">#</a> Security</h2><p>Laravel is using HttpOnly cookies and an additional CSRF token. This provides protection against both XSS and CSRF attacks</p><div class="warning custom-block"><p class="custom-block-title">Keep in mind</p><p>When working with VueJS, the v-html directive is XSS vulnerable, so it should be used only with sanitized/safe data</p></div><h2 id="authentication-2"><a href="#authentication-2" aria-hidden="true" class="header-anchor">#</a> Authentication</h2><p>Various configuration options are available for the user's password such as lifetime,
minimum number of characters and more. Please check out the specifics by taking a look at the
<a href="https://docs.laravel-enso.com/packages/core.html" target="_blank" rel="noopener noreferrer">core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> documentation page.</p><h2 id="authorization"><a href="#authorization" aria-hidden="true" class="header-anchor">#</a> Authorization</h2><ul><li>application wide, checking user status: active/inactive. The check is made for every request, via a middleware. The inactive status prevents the user from logging in and making requests. If an user becomes inactive while he's still logged in, at his next request he'll be logged out and redirected to the login page with a notification</li><li>application-section wide, via the menu's visibility, depending on the user's role. The users that don't have access to a certain menu, can't see it. This level doesn't block access to the routes, it just affects the visibility of the menus</li><li>application-section wide, depending on permitted access to routes, which is tied to the user's role and the associated permissions for that role. The check is made for each request, via a middleware. If the user is not allowed on a route a 403 response is given back and a <code>laravel.log</code> entry is made.</li><li>content specific, via gates &amp; policies. The check is made locally, when and where gates &amp; policies are used</li></ul><h2 id="middleware-middleware-groups"><a href="#middleware-middleware-groups" aria-hidden="true" class="header-anchor">#</a> Middleware &amp; Middleware Groups</h2><ul><li>for the routes within the application, the <code>core</code> middleware group is applied</li><li>the <code>core</code> group contains the middleware below, presented in the order they're applied:
<ul><li><code>verify-active-state</code> - checks users's status (active/inactive)</li><li><code>action-logger</code> - logs for each request the user's id, route, url, the HTTP verb and the timestamps</li><li><code>verify-route-access</code> - authorizes the access to a route</li><li><code>impersonate</code> - starts and stops the <a href="https://github.com/laravel-enso/Impersonate" target="_blank" rel="noopener noreferrer">impersonation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of a user, when needed</li><li><code>set-language</code> - sets the user's chosen language (<a href="https://github.com/laravel-enso/Localisation" target="_blank" rel="noopener noreferrer">localisation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li></ul></li></ul><h2 id="usergroups-roles-users"><a href="#usergroups-roles-users" aria-hidden="true" class="header-anchor">#</a> UserGroups, <a href="https://github.com/laravel-enso/RoleManager" target="_blank" rel="noopener noreferrer">Roles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; Users</h2><ul><li>users represent the operators using the application</li><li>roles are collections of permissions</li><li>user groups (previously owners) can represent departments, types, and even companies</li><li>an user group can have many users</li><li>an user group can have many roles</li><li>an user has <strong>just one user group</strong> and <strong>just one role</strong></li><li>the role of a user may only be one of the roles available for its user group</li><li>users have an active or inactive status, where inactive users cannot login or make requests in the application (but can set/reset their password)</li><li>the <code>Role</code> model contains the <code>AdminId</code> and <code>SupervisorId</code> constants that determine who
the administrator and supervisor roles are</li><li>the <code>UserGroup</code> model contains the <code>AdminGroupId</code> constant that is used to determine which is the Administrator
user group</li></ul><h2 id="preferences"><a href="#preferences" aria-hidden="true" class="header-anchor">#</a> Preferences</h2><p>The mechanism allows saving and loading of the user's preferences for several aspects of the application.</p><ul><li>the preferences can be updated from the right-hand sidebar. From there the user can also reset the preferences to default.</li><li>the user's preferences are stored in the <code>preferences</code> table, under <code>value</code> column, in JSON format.</li><li>list of preferences
<ul><li><code>lang</code> - the user's language</li><li><code>theme</code> - the currently selected theme</li><li><code>expandedMenu</code> - the menu state, defaults <code>true</code></li></ul></li></ul><h2 id="translations"><a href="#translations" aria-hidden="true" class="header-anchor">#</a> Translations</h2><p>Are loaded at application load, and refreshed as needed</p><h2 id="environment"><a href="#environment" aria-hidden="true" class="header-anchor">#</a> Environment</h2><ul><li>config
<ul><li>within the configuration enso folder <code>config/enso</code> you'll find configuration files for the various laravel-enso packages</li><li>inside 'config.php' various options may be set, such as the folders used for storing uploads, avatars, etc. the caching duration and the timestamps format when displaying them, the app version displayed in the footer and more</li></ul></li></ul><h2 id="telemetry"><a href="#telemetry" aria-hidden="true" class="header-anchor">#</a> Telemetry</h2><ul><li>the implicit <code>login</code> event that Laravel fires on a user's login triggers a listener that stores the user's ip, user-agent and timestamps inside the <code>logins</code> table</li></ul><h2 id="exceptions"><a href="#exceptions" aria-hidden="true" class="header-anchor">#</a> Exceptions</h2><ul><li>when needed, the exceptions thrown are as specific as possible</li><li>since requests are supposed to be ajax, JSON responses are given back</li></ul></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/app.c4eaa9d5.js" defer></script><script src="/assets/js/75.b79f9d0b.js" defer></script>
  </body>
</html>
